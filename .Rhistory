install.packages("haven") # Archivos .dta
install.packages("haven") # Archivos .dta
install.packages("plm")
install.packages("skimr")
install.packages("skimr")
install.packages("dplyr")
install.packages("ggplot2")
install.packages("skimr")
install.packages("skimr")
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
library(haven)
library(haven)
library(plm)
library(haven)
library(plm)
library(scales)
library(skimr)
library(haven)
library(plm)
library(scales)
library(skimr)
library(dplyr)
library(ggplot2)
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
getwd()
list.files()
file.exists("oil_windfall_sin10perc.dta")
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
View(data)
set.seed(201613424)
# Cargar liberias y paquetes
install.packages("haven") # Archivos .dta
install.packages("plm")
install.packages("skimr")
install.packages("dplyr")
install.packages("ggplot2")
library(haven)
library(plm)
library(scales)
library(skimr)
library(dplyr)
library(ggplot2)
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
set.seed(201613424)
install.packages("skimr")
# Cargar liberias y paquetes
install.packages("haven") # Archivos .dta
install.packages("plm")
install.packages("skimr")
install.packages("dplyr")
install.packages("skimr")
install.packages("ggplot2")
library(haven)
library(plm)
library(scales)
library(skimr)
library(dplyr)
library(ggplot2)
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
set.seed(201613424)
View(data)
data2 <- data %>%
mutate(coastal_offshore = ifelse(coastal == 1 & onshore == 0, 1, 0))
View(data2)
m_edu <- ivreg(exp_educ_cult_pc_2000 ~ rev_oil_pc_2000 |
price_x_potential,
data = data2,
subset = (coastal_offshore == 1))
library(AER)
data2 <- data %>%
mutate(coastal_offshore = ifelse(coastal == 1 & onshore == 0, 1, 0))
m_edu <- ivreg(exp_educ_cult_pc_2000 ~ rev_oil_pc_2000 |
price_x_potential,
data = data2,
subset = (coastal_offshore == 1))
data$drop_flag <- sample(c(0,1), size = nrow(datos), replace = TRUE, prob = c(0.9,0.1))
# Eliminar aleatoriamente el 10% de la base
data$drop_flag <- sample(c(0,1), size = nrow(data), replace = TRUE, prob = c(0.9,0.1))
data2.1 <- subset(datos, drop_flag == 0)
# Eliminar aleatoriamente el 10% de la base
data$drop_flag <- sample(c(0,1), size = nrow(data), replace = TRUE, prob = c(0.9,0.1))
data2.1 <- subset(data, drop_flag == 0)
View(data2.1)
# Eliminar aleatoriamente el 10% de la base
set.seed(202312345)  # tu código de estudiante
# Número exacto de filas a eliminar (10% de la base)
n_drop <- round(0.1 * nrow(data))
# Escoger aleatoriamente los índices a eliminar
drop_index <- sample(1:nrow(data), size = n_drop)
# Crear la submuestra eliminando esos índices
data_sub <- data[-drop_index, ]
View(data_sub)
# Cargar liberias y paquetes
install.packages("haven") # Archivos .dta
install.packages("plm")
install.packages("skimr")
install.packages("dplyr")
install.packages("ggplot2")
library(haven)
library(plm)
library(scales)
library(skimr)
library(dplyr)
library(ggplot2)
library(AER)         # ivreg
# Leer archivo .dta
data <- read_dta("oil_windfall_sin10perc.dta")
set.seed(201613424)
install.packages("ggplot2")
install.packages("skimr")
install.packages("dplyr")
install.packages("plm")
install.packages("haven")
# Eliminar aleatoriamente el 10% de la base
# Número exacto de filas a eliminar (10% de la base)
n_drop <- round(0.1 * nrow(data))
# Escoger aleatoriamente los índices a eliminar
drop_index <- sample(1:nrow(data), size = n_drop)
# Crear la submuestra eliminando esos índices
data_sub <- data[-drop_index, ]
# Eliminar aleatoriamente el 10% de la base
# Número exacto de filas a eliminar (10% de la base)
eliminar <- round(0.1 * nrow(data))
# Escoger aleatoriamente los índices a eliminar
drop_index <- sample(1:nrow(data), size = eliminar)
# Crear la submuestra eliminando esos índices
data2 <- data[-drop_index, ]
View(data2)
# Solo municipios costeros que reciben petroleo
data2 <- subset(data2, coastal == 1 & onshore == 0)
View(data2)
string(data2)
str(data2)
str(data2)
# Definir variables
endogena <- "oilandgasvalue2000_cap"
instrumento <- "mun_budget_revenue2000_pred_c"
y_var <- c("pmun_exp_funct_educ_cult2000c",
"pmun_exp_funct_health_sanit2000c",
"pmun_exp_funct_transport2000c",
"pmun_exp_funct_welf2000c")
# Regresión Educación y Cultura
iv_educ <- ivreg(pmun_exp_funct_educ_cult2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Salud y Sanitización
iv_salud <- ivreg(pmun_exp_funct_health_sanit2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Transporte
iv_transp <- ivreg(pmun_exp_funct_transport2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Transferencias sociales
iv_welfare <- ivreg(pmun_exp_funct_welf2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
stargazer(iv_educ, iv_salud, iv_transp, iv_welfare,
type = "text",
keep = c("mun_budget_revenue2000_pred_c"),   # muestra solo el coef. de interés
omit.stat = c("f","ser"),   # omitir estadísticos poco relevantes
dep.var.labels = ("Gasto público municipal (2000)"),
covariate.labels = c("Ingresos municipales (IV)"),
column.labels = c("Educación y Cultura", "Salud y Sanitización",
"Transporte", "Transferencias Sociales"),
add.lines = list(
c("Muestra", "Costeros offshore", "Costeros offshore", "Costeros offshore", "Costeros offshore"),
c("Instrumento", "Petróleo/gas pc", "Petróleo/gas pc", "Petróleo/gas pc", "Petróleo/gas pc")
),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
library(stargazer)
# Regresión Educación y Cultura
iv_educ <- ivreg(pmun_exp_funct_educ_cult2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Salud y Sanitización
iv_salud <- ivreg(pmun_exp_funct_health_sanit2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Transporte
iv_transp <- ivreg(pmun_exp_funct_transport2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Transferencias sociales
iv_welfare <- ivreg(pmun_exp_funct_welf2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
stargazer(iv_educ, iv_salud, iv_transp, iv_welfare,
type = "text",
keep = c("mun_budget_revenue2000_pred_c"),   # muestra solo el coef. de interés
omit.stat = c("f","ser"),   # omitir estadísticos poco relevantes
dep.var.labels = ("Gasto público municipal (2000)"),
covariate.labels = c("Ingresos municipales (IV)"),
column.labels = c("Educación y Cultura", "Salud y Sanitización",
"Transporte", "Transferencias Sociales"),
add.lines = list(
c("Muestra", "Costeros offshore", "Costeros offshore", "Costeros offshore", "Costeros offshore"),
c("Instrumento", "Petróleo/gas pc", "Petróleo/gas pc", "Petróleo/gas pc", "Petróleo/gas pc")
),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
# Primera etapa
primera_etapa <- lm(mun_budget_revenue2000_pred_c ~ oilandgasvalue2000_cap, data = data2)
summary(primera_etapa)
# 2. Extraer el t del coeficiente del instrumento
t_stat <- summary(primera_etapa)$coefficients["oilandgasvalue2000_cap", "t value"]
# 3. Calcular F como t^2
F_stat <- t_stat^2
F_stat
# Personas que no viven en favelas en 2000
iv_favelas <- ivreg(p_hhld_abovestrandard_ppl_2000 ~ 1 | oilandgasvalue2000_cap,
data = data2)
# Número de salones por millón de habitantes en el 2005.
iv_salones <- ivreg(clroomsMunicipal_pop2005 ~ 1 | oilandgasvalue2000_cap,
data = data2)
# Tabla
stargazer(iv_favelas, iv_salones,
type = "text",
dep.var.labels = c("% población fuera de favelas (2000)",
"Salones por millón de habitantes (2005)"),
covariate.labels = c("Petróleo/gas per cápita"),
column.labels = c("Bienestar 1", "Bienestar 2"),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
# Personas que no viven en favelas en 2000
iv_favelas <- ivreg(p_hhld_abovestrandard_ppl_2000 ~ 1 | oilandgasvalue2000_cap,
data = data2)
# Número de salones por millón de habitantes en el 2005.
iv_salones <- ivreg(clroomsMunicipal_pop2005 ~ 1 | oilandgasvalue2000_cap,
data = data2)
# Tabla
stargazer(iv_favelas, iv_salones,
type = "text",
dep.var.labels = c("% población fuera de favelas (2000)",
"Salones por millón de habitantes (2005)"),
covariate.labels = c("Petróleo/gas per cápita"),
column.labels = c("Bienestar 1", "Bienestar 2"),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
sum(is.na(data2$mun_budget_revenue2000_pred_c))
sum(is.na(data2$p_hhld_abovestrandard_ppl_2000))
sum(is.na(data2$oilandgasvalue2000_cap))
# Submuestra sin NA
data3 <- na.omit(data2[, c("p_hhld_abovestrandard_ppl_2000",
"clroomsMunicipal_pop2005",
"mun_budget_revenue2000_pred_c",
# Submuestra sin NA
data3 <- na.omit(data2[, c("p_hhld_abovestrandard_ppl_2000",
"clroomsMunicipal_pop2005",
"mun_budget_revenue2000_pred_c",
"oilandgasvalue2000_cap")])
# Revisar que se eliminaron los NA
sum(is.na(data3$mun_budget_revenue2000_pred_c)) # debe dar 0
# Submuestra sin NA
data3 <- na.omit(data2[, c("p_hhld_abovestrandard_ppl_2000",
"clroomsMunicipal_pop2005",
"mun_budget_revenue2000_pred_c",
"oilandgasvalue2000_cap")])
# Revisar que se eliminaron los NA
sum(is.na(data3$mun_budget_revenue2000_pred_c))
# Personas que no viven en favelas en 2000
iv_favelas <- ivreg(p_hhld_abovestrandard_ppl_2000 ~ 1 | oilandgasvalue2000_cap,
data = data3)
# Número de salones por millón de habitantes en el 2005.
iv_salones <- ivreg(clroomsMunicipal_pop2005 ~ 1 | oilandgasvalue2000_cap,
data = data3)
# Tabla
stargazer(iv_favelas, iv_salones,
type = "text",
dep.var.labels = c("% población fuera de favelas (2000)",
"Salones por millón de habitantes (2005)"),
covariate.labels = c("Petróleo/gas per cápita"),
column.labels = c("Bienestar 1", "Bienestar 2"),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
# Submuestra sin NA
data3 <- na.omit(data2[, c("p_hhld_abovestrandard_ppl_2000",
"clroomsMunicipal_pop2005",
"mun_budget_revenue2000_pred_c",
"oilandgasvalue2000_cap")])
# Revisar que se eliminaron los NA
sum(is.na(data3$mun_budget_revenue2000_pred_c))
# Personas que no viven en favelas en 2000
iv_favelas <- ivreg(p_hhld_abovestrandard_ppl_2000 ~ 1 | oilandgasvalue2000_cap,
data = data3)
# Número de salones por millón de habitantes en el 2005.
iv_salones <- ivreg(clroomsMunicipal_pop2005 ~ 1 | oilandgasvalue2000_cap,
data = data3)
# Tabla
stargazer(iv_favelas, iv_salones,
type = "text",
dep.var.labels = c("% población fuera de favelas (2000)",
"Salones por millón de habitantes (2005)"),
covariate.labels = c("Petróleo/gas per cápita"),
column.labels = c("Bienestar 1", "Bienestar 2"),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
# Submuestra sin NA
data3 <- na.omit(data2[, c("p_hhld_abovestrandard_ppl_2000",
"clroomsMunicipal_pop2005",
"mun_budget_revenue2000_pred_c",
"oilandgasvalue2000_cap")])
# Revisar que se eliminaron los NA
sum(is.na(data3$mun_budget_revenue2000_pred_c))
# Personas que no viven en favelas en 2000
favelas <- lm(p_hhld_abovestrandard_ppl_2000 ~ oilandgasvalue2000_cap, data = data3)
# Número de salones por millón de habitantes en el 2005.
salones <- lm(clroomsMunicipal_pop2005 ~ oilandgasvalue2000_cap, data = data3)
stargazer(favelas, salones,
type = "text",
dep.var.labels = c("% población fuera de favelas (2000)",
"Salones por millón de habitantes (2005)"),
covariate.labels = c("Ingresos municipales (IV)"),
column.labels = c("Bienestar 1", "Bienestar 2"),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
# Regresión Educación y Cultura
iv_educ <- ivreg(pmun_exp_funct_educ_cult2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Salud y Sanitización
iv_salud <- ivreg(pmun_exp_funct_health_sanit2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Transporte
iv_transp <- ivreg(pmun_exp_funct_transport2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
# Regresión Transferencias sociales
iv_welfare <- ivreg(pmun_exp_funct_welf2000c ~ mun_budget_revenue2000_pred_c |
oilandgasvalue2000_cap,
data = data2)
stargazer(iv_educ, iv_salud, iv_transp, iv_welfare,
type = "text",
keep = c("mun_budget_revenue2000_pred_c"),
omit.stat = c("f","ser"),
dep.var.labels = ("Gasto público municipal (2000)"),
covariate.labels = c("Ingresos municipales (IV)"),
column.labels = c("Educación y Cultura", "Salud y Sanitización",
"Transporte", "Transferencias Sociales"),
add.lines = list(
c("Muestra", "Costeros offshore", "Costeros offshore", "Costeros offshore", "Costeros offshore"),
c("Instrumento", "Petróleo/gas pc", "Petróleo/gas pc", "Petróleo/gas pc", "Petróleo/gas pc")
),
star.cutoffs = c(0.1, 0.05, 0.01),
notes = "Errores estándar robustos entre paréntesis. *** p<0.01, ** p<0.05, * p<0.1",
notes.align = "l")
